
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gridded Data Station Subsetting on closest model point &#8212; EcoSystems Fisheries-Oceanograpy Coordinated Investigations (EcoFOCI)</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../../_static/FOCI_logo.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Two ways to use bathymetric datasets to generate bathymetry contours in a plot" href="Map_contours_examples.html" />
    <link rel="prev" title="Data Analysis And Visualization" href="../data_analysis_and_visualization.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/FOCI_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">EcoSystems Fisheries-Oceanograpy Coordinated Investigations (EcoFOCI)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Code Gallery
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../data_access.html">
   Data Access
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../data_access_notebooks/2022-01-06-CrossSound_RetrieveAndProcess.html">
     Cross Sound ADCP Data Retrieval (a convenient tutorial)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../data_analysis_and_visualization.html">
   Data Analysis And Visualization
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Gridded Data Station Subsetting on closest model point
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Map_contours_examples.html">
     Two ways to use bathymetric datasets to generate bathymetry contours in a plot
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../data_management.html">
   Data Management
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ecofocipy.html">
   EcoFOCIpy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ecofocipy_notebooks/EcoFOCIpy_20bsp14a_adcp.html">
     Using EcoFOCIpy to process raw field data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ecofocipy_notebooks/EcoFOCIpy_2D_20bsp14a_QC.html">
     EcoFOCIpy ADCP QC - 20BSP-14A
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../oculus_glider.html">
   Oculus Glider Notebooks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../oculus_glider_notebooks/EcoFOCI_GliderTools_Readme.html">
     EcoFOCI evaluation/application of Glider Tools for post processing
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Field Data History
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ecofoci_fielddata_history/2013/index.html">
   EcoFOCI FieldData Processing 2013 - Moorings
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../ecofoci_fielddata_history/2013/13bs5a/index.html">
     EcoFOCI FieldData Processing 2013 - 13BS-5A
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../ecofoci_fielddata_history/2013/13bs5a/EcoFOCIpy_1d_filter_13bs5a.html">
       EcoFOCIpy_1d_filter_13bs5a
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ecofoci_fielddata_history/2014/index.html">
   EcoFOCI FieldData Processing 2014 - Moorings
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../ecofoci_fielddata_history/2014/14bs2c/index.html">
     EcoFOCI FieldData Processing 2014 - 14BS-2C
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../ecofoci_fielddata_history/2014/14bs2c/EcoFOCIpy_1d_filter_14bs2c.html">
       EcoFOCIpy_1d_filter_14bs2c
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../ecofoci_fielddata_history/2014/14bs5a/index.html">
     EcoFOCI FieldData Processing 2014 - 14BS-5A
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../ecofoci_fielddata_history/2014/14bs5a/EcoFOCIpy_1d_filter_14bs5a.html">
       EcoFOCIpy_1d_filter_14bs5a
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Other Projects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../MetaData_Rediscovery.html">
   MetaData Rediscovery
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/1_Table_Of_Contents.html">
     Table of Contents
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/2_Summary.html">
     Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/3a_Deck195_FOSDIC_Decoding.html">
     FOSDIC Deck 195 Decoding
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_Explore.html">
     Plot all identified Ship Class ID’s and color code by SST
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre01.html">
     Exploring Deck 195 Prefix’s Vessel ID:01
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre02.html">
     Exploring Deck 195 Prefix’s Vessel ID:02
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre03.html">
     Exploring Deck 195 Prefix’s Vessel ID:03
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre06.html">
     Exploring Deck 195 Prefix’s Vessel ID:06
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre07.html">
     Exploring Deck 195 Prefix’s Vessel ID:07
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre08.html">
     Exploring Deck 195 Prefix’s Vessel ID:08
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre09.html">
     Exploring Deck 195 Prefix’s Vessel ID:09
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre10.html">
     Exploring Deck 195 Prefix’s Vessel ID:10
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre12.html">
     Exploring Deck 195 Prefix’s Vessel ID:12
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre13.html">
     Exploring Deck 195 Prefix’s Vessel ID:13
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre14.html">
     Exploring Deck 195 Prefix’s Vessel ID:14
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre15.html">
     Exploring Deck 195 Prefix’s Vessel ID:15
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre16.html">
     Exploring Deck 195 Prefix’s Vessel ID:16
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre17.html">
     Exploring Deck 195 Prefix’s Vessel ID:17
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre18.html">
     Exploring Deck 195 Prefix’s Vessel ID:18
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre19.html">
     Exploring Deck 195 Prefix’s Vessel ID:19
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre20.html">
     Exploring Deck 195 Prefix’s Vessel ID:20
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre21.html">
     Exploring Deck 195 Prefix’s Vessel ID:21
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre22.html">
     Exploring Deck 195 Prefix’s Vessel ID:22
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre23.html">
     Exploring Deck 195 Prefix’s Vessel ID:23
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre25.html">
     Exploring Deck 195 Prefix’s Vessel ID:25
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre26.html">
     Exploring Deck 195 Prefix’s Vessel ID:26
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre27.html">
     Exploring Deck 195 Prefix’s Vessel ID:27
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre28.html">
     Exploring Deck 195 Prefix’s Vessel ID:28
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre29.html">
     Exploring Deck 195 Prefix’s Vessel ID:29
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre30.html">
     Exploring Deck 195 Prefix’s Vessel ID:30
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre31.html">
     Exploring Deck 195 Prefix’s Vessel ID:31
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre32.html">
     Exploring Deck 195 Prefix’s Vessel ID:32
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre33.html">
     Exploring Deck 195 Prefix’s Vessel ID:33
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre34.html">
     Exploring Deck 195 Prefix’s Vessel ID:34
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre35.html">
     Exploring Deck 195 Prefix’s Vessel ID:35
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre37.html">
     Exploring Deck 195 Prefix’s Vessel ID:37
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre38.html">
     Exploring Deck 195 Prefix’s Vessel ID:38
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre39.html">
     Exploring Deck 195 Prefix’s Vessel ID:39
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre40.html">
     Exploring Deck 195 Prefix’s Vessel ID:40
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre41.html">
     Exploring Deck 195 Prefix’s Vessel ID:41
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre42.html">
     Exploring Deck 195 Prefix’s Vessel ID:42
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre43.html">
     Exploring Deck 195 Prefix’s Vessel ID:43
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre44.html">
     Exploring Deck 195 Prefix’s Vessel ID:44
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre45.html">
     Exploring Deck 195 Prefix’s Vessel ID:45
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre46.html">
     Exploring Deck 195 Prefix’s Vessel ID:46
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre47.html">
     Exploring Deck 195 Prefix’s Vessel ID:47
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre48.html">
     Exploring Deck 195 Prefix’s Vessel ID:48
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre49.html">
     Exploring Deck 195 Prefix’s Vessel ID:49
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre50.html">
     Exploring Deck 195 Prefix’s Vessel ID:50
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre51.html">
     Exploring Deck 195 Prefix’s Vessel ID:51
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre52.html">
     Exploring Deck 195 Prefix’s Vessel ID:52
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre54.html">
     Exploring Deck 195 Prefix’s Vessel ID:54
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre55.html">
     Exploring Deck 195 Prefix’s Vessel ID:55
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre56.html">
     Exploring Deck 195 Prefix’s Vessel ID:56
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre58.html">
     Exploring Deck 195 Prefix’s Vessel ID:58
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre59.html">
     Exploring Deck 195 Prefix’s Vessel ID:59
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre60.html">
     Exploring Deck 195 Prefix’s Vessel ID:60
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre61.html">
     Exploring Deck 195 Prefix’s Vessel ID:61
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre62.html">
     Exploring Deck 195 Prefix’s Vessel ID:62
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre65.html">
     Exploring Deck 195 Prefix’s Vessel ID:71
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre68.html">
     Exploring Deck 195 Prefix’s Vessel ID:68
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre71.html">
     Exploring Deck 195 Prefix’s Vessel ID:71
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre76.html">
     Exploring Deck 195 Prefix’s Vessel ID:82
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre77.html">
     Exploring Deck 195 Prefix’s Vessel ID:77
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre78.html">
     Exploring Deck 195 Prefix’s Vessel ID:78
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre81.html">
     Exploring Deck 195 Prefix’s Vessel ID:81
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre82.html">
     Exploring Deck 195 Prefix’s Vessel ID:82
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre84.html">
     Exploring Deck 195 Prefix’s Vessel ID:84
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre85.html">
     Exploring Deck 195 Prefix’s Vessel ID:85
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre86.html">
     Exploring Deck 195 Prefix’s Vessel ID:86
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre88.html">
     Exploring Deck 195 Prefix’s Vessel ID:88
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre89.html">
     Exploring Deck 195 Prefix’s Vessel ID:89
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre90.html">
     Exploring Deck 195 Prefix’s Vessel ID:90
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre91.html">
     Exploring Deck 195 Prefix’s Vessel ID:91
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre94.html">
     Exploring Deck 195 Prefix’s Vessel ID:94
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre95.html">
     Exploring Deck 195 Prefix’s Vessel ID:95
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre96.html">
     Exploring Deck 195 Prefix’s Vessel ID:96
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre97.html">
     Exploring Deck 195 Prefix’s Vessel ID:97
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MetaData_Rediscovery_notebooks/ICOADS_GeoViews_pre98.html">
     Exploring Deck 195 Prefix’s Vessel ID:98
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Other Resources - Outside of EcoFOCI
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://ioos.github.io/ioos_code_lab">
   IOOS Examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://help.aodn.org.au/aodn-data-tools/user-code-library/">
   Opening netCDF files - hints from AODN
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="http://unidata.github.io/notebook-gallery/">
   Unidata Jupyter Notebook Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="http://iobis.org/tutorial/">
   Extracting and Enriching OBIS data with R
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/USGS-R">
   USGS-R Examples
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contact Us
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../contact_us.html">
   Contact Us
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <a href="https://www.ecofoci.noaa.gov">EcoFOCI</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/content/code_gallery/data_analysis_and_visualization_notebooks/FindNearestGriddedData.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/shaunwbell/ecofoci_code_lab"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/shaunwbell/ecofoci_code_lab/issues/new?title=Issue%20on%20page%20%2Fcontent/code_gallery/data_analysis_and_visualization_notebooks/FindNearestGriddedData.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://binder.pangeo.io/v2/gh/shaunwbell/ecofoci_code_lab/main?urlpath=lab/tree/jupyterbook/content/code_gallery/data_analysis_and_visualization_notebooks/FindNearestGriddedData.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/shaunwbell/ecofoci_code_lab/blob/main/jupyterbook/content/code_gallery/data_analysis_and_visualization_notebooks/FindNearestGriddedData.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#explore-using-data-from-netcdf-files">
   Explore using data from netcdf files
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="gridded-data-station-subsetting-on-closest-model-point">
<h1>Gridded Data Station Subsetting on closest model point<a class="headerlink" href="#gridded-data-station-subsetting-on-closest-model-point" title="Permalink to this headline">¶</a></h1>
<p>This program is a replacement for the suite of programs like <code class="docutils literal notranslate"><span class="pre">HROISST_Station.py</span></code> and <code class="docutils literal notranslate"><span class="pre">NARR_daily_WindsSFCtemp_Station</span></code>.  Previous iterations of this program would use netcdf files from archive centers to first, locate the closest gridpoint, then extract that point from all successive files and combine the results into a single EPIC flavored netcdf file.</p>
<p><strong>Common Datasets</strong></p>
<ul class="simple">
<li><p>NARR 3hrly or daily data</p></li>
<li><p>NCEP/NCAR Reanalysis data</p></li>
<li><p>erddap hosted JPL MUR sst data</p></li>
<li><p>etopo5 or other bathymetry</p></li>
</ul>
<p>Primary functions to replace and motivation for this notebook</p>
<ul class="simple">
<li><p>Stop supporting python 2.7 (support 3.8 or greater)</p></li>
<li><p>Stop outputting anything EPIC related files</p></li>
<li><p>use native “find nearest” for xarray… may not truly take into account lat/lon is not consistent km as you go furthur north like great circle would.  Not sure this is actually an issue though unles your grid is super coarse…</p></li>
</ul>
<p>Tasks that are addressed below:</p>
<ul class="simple">
<li><p>read from multiple files (often parameters are in seperate files for seperate years)</p></li>
<li><p>read from erddap if available</p></li>
<li><p>filter 3hr winds (3pt triangle filter shown), but you can use any other filter on any other parameter</p></li>
<li><p>take daily, hourly or monthly input</p></li>
</ul>
<p>Inputs:</p>
<ul class="simple">
<li><p>station name</p></li>
<li><p>start/end time</p></li>
<li><p>location (lat,lon)</p></li>
<li><p>filter information</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xa</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="explore-using-data-from-netcdf-files">
<h2>Explore using data from netcdf files<a class="headerlink" href="#explore-using-data-from-netcdf-files" title="Permalink to this headline">¶</a></h2>
<p>Commonly PJS asks for NARR winds/temp from certain locations (C2, M2)</p>
<p>For netcdf files with parameters that span mulitple files (like NARR or NCEP Reanalysis files where each file is usually just a single parameter plus location/time) you can read them as a multi-file dataset aggregated on similar years (so loop over years for a multi year analysis)</p>
<p>If you only want a single parameter, you can go straight to looping over years or even just use the mfdataset method to open all files.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span> <span class="o">=</span> <span class="mi">2022</span>
<span class="n">lat</span> <span class="o">=</span> <span class="mf">71.230</span>
<span class="n">lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">164.105</span>
<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;C2&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">netcdf_dir</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;datapath&#39;</span><span class="p">:</span><span class="s1">&#39;/Users/bell/in_and_outbox/data_sets/reanalysis_data/NARR/&#39;</span><span class="p">,</span> <span class="c1">#NARR Netcdf example</span>
              <span class="s1">&#39;dataset&#39;</span><span class="p">:</span><span class="s1">&#39;NARR&#39;</span><span class="p">}</span>
<span class="c1"># netcdf_dir = {&#39;datapath&#39;:&#39;/Volumes/External/in_and_outbox/data_sets/reanalyis_data/NCEP-NCAR/daily/&#39;, #NCEP Netcdf example</span>
<span class="c1">#               &#39;dataset&#39;:&#39;NCEP&#39;}</span>

<span class="c1">#load muliple files, one year - or multiple years, one measurement type</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xa</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span><span class="n">netcdf_dir</span><span class="p">[</span><span class="s1">&#39;datapath&#39;</span><span class="p">]</span><span class="o">+</span><span class="sa">f</span><span class="s1">&#39;*</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">.nc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span> <span class="c1">#&lt;-- pass year in - </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/bell/miniconda3/envs/py38/lib/python3.8/site-packages/xarray/conventions.py:516: SerializationWarning: variable &#39;air&#39; has multiple fill values {9.96921e+36, -9.96921e+36}, decoding all values to NaN.
  new_vars[k] = decode_cf_variable(
/Users/bell/miniconda3/envs/py38/lib/python3.8/site-packages/xarray/conventions.py:516: SerializationWarning: variable &#39;uwnd&#39; has multiple fill values {9.96921e+36, -9.96921e+36}, decoding all values to NaN.
  new_vars[k] = decode_cf_variable(
/Users/bell/miniconda3/envs/py38/lib/python3.8/site-packages/xarray/conventions.py:516: SerializationWarning: variable &#39;vwnd&#39; has multiple fill values {9.96921e+36, -9.96921e+36}, decoding all values to NaN.
  new_vars[k] = decode_cf_variable(
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the following is a least distance calculator using the units specified.  </span>
<span class="c1"># As one deg of lon and one deg of latitude are not consistantly equal over the entire globe (like one unit of km is) this approach</span>
<span class="c1">#  has its numerical limitations and should only be used when a measure of ambiguity is ok.  otherwise, stick to consistent units (km or x/y)</span>
<span class="c1">#</span>
<span class="c1"># You may need to change the lat/lon variables though for the independent dataset</span>

<span class="k">if</span> <span class="n">netcdf_dir</span><span class="p">[</span><span class="s1">&#39;dataset&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;NARR&#39;</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39; for when grid is in x/y coords&#39;&#39;&#39;</span>
    <span class="n">d_lat</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">lat</span> <span class="o">-</span> <span class="n">lat</span>
    <span class="n">d_lon</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">lon</span> <span class="o">-</span> <span class="n">lon</span>
    <span class="n">r2_requested</span> <span class="o">=</span> <span class="n">d_lat</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">d_lon</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">i_j_loc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">r2_requested</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">r2_requested</span><span class="p">))</span>

    <span class="n">nearest_point</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">i_j_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">i_j_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#x/y order may need reversal</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39; for when its 0:360&#39;&#39;&#39;</span>
        <span class="n">nearest_point</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="o">+</span><span class="mi">360</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39; for when its -180:180&#39;&#39;&#39;</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ods</span><span class="o">.</span><span class="n">AT_21</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-25.797241 , -23.142609 , -23.471329 , -22.580551 , -22.1232   ,
       -21.782013 , -22.937912 , -24.244415 , -24.639267 , -22.822906 ,
       -24.151901 , -23.558151 , -23.051193 , -22.685837 , -22.852142 ,
       -25.176117 , -26.748383 , -27.441772 , -27.982346 , -27.701141 ,
       -27.684387 , -26.920288 , -27.034958 , -26.36586  , -25.174927 ,
       -22.801147 , -21.335037 , -20.32814  , -20.090027 , -19.014496 ,
       -18.656036 , -18.33432  , -18.312744 , -18.867462 , -19.123322 ,
       -19.530334 , -19.808167 , -20.566345 , -19.852066 , -18.34375  ,
       -21.006226 , -22.135834 , -24.501404 , -25.845093 , -27.237137 ,
       -27.84909  , -27.634018 , -26.053299 , -25.37236  , -24.274063 ,
       -24.02945  , -23.893768 , -23.797607 , -24.200073 , -25.256744 ,
       -26.08464  , -26.45224  , -27.006073 , -27.184387 , -27.360825 ,
       -28.49202  , -29.554688 , -30.18161  , -28.604752 , -28.504517 ,
       -27.216522 , -27.655838 , -27.569717 , -30.631851 , -30.50978  ,
       -29.884338 , -30.630112 , -30.294113 , -29.409927 , -29.023758 ,
       -28.70839  , -28.579788 , -29.44629  , -29.007843 , -27.992172 ,
       -28.955826 , -28.396881 , -29.64447  , -30.68576  , -29.868164 ,
       -26.324219 , -24.067413 , -22.775467 , -23.02095  , -22.389984 ,
       -23.037903 , -23.350128 , -24.453735 , -24.55095  , -24.663025 ,
       -24.21341  , -24.628922 , -25.36383  , -29.119385 , -28.724533 ,
       -25.916534 , -24.26091  , -24.387695 , -25.535263 , -27.925217 ,
       -28.968918 , -29.526382 , -30.571579 , -30.792603 , -30.929962 ,
       -30.75     , -30.460037 , -30.713226 , -30.992676 , -30.997833 ,
       -31.066498 , -28.498413 , -25.762604 , -24.499802 , -23.450424 ,
       -22.92743  , -22.535599 , -22.30931  , -21.966705 , -22.258926 ,
       -22.057129 , -22.19011  , -22.510681 , -22.884918 , -23.304062 ,
       -23.495773 , -23.606567 , -23.762451 , -23.091904 , -23.052628 ,
       -23.139679 , -23.091766 , -23.003769 , -23.120255 , -22.884995 ,
       -22.91307  , -22.882202 , -22.764969 , -22.304047 , -22.441101 ,
       -21.888702 , -22.027435 , -22.827454 , -23.215454 , -22.14981  ,
       -21.637299 , -21.417328 , -21.410492 , -21.087234 , -21.2892   ,
       -24.152466 , -25.597122 , -23.37622  , -25.003525 , -26.941193 ,
       -27.99472  , -29.55513  , -28.690567 , -29.73584  , -30.543549 ,
       -31.182251 , -30.239868 , -30.199387 , -30.147125 , -29.973907 ,
       -29.152802 , -28.82785  , -28.714828 , -28.56578  , -28.102356 ,
       -27.78598  , -27.907959 , -26.756393 , -25.438782 , -23.034515 ,
       -22.078812 , -21.082474 , -20.860596 , -20.186462 , -20.442932 ,
       -19.857346 , -19.891113 , -18.790176 , -17.843277 , -17.215332 ,
       -16.122345 , -16.008514 , -16.461517 , -17.011932 , -18.471573 ,
       -19.928268 , -21.855621 , -23.028519 , -24.142868 , -24.31601  ,
       -25.166443 , -24.833649 , -25.89003  , -26.81691  , -27.513916 ,
       -27.969193 , -28.218216 , -26.56868  , -25.843903 , -24.785019 ,
       -24.69136  , -24.421722 , -24.548645 , -24.300842 , -24.445587 ,
       -24.653534 , -25.154327 , -25.782394 , -29.256134 , -31.366928 ,
       -32.069214 , -31.644287 , -31.165802 , -30.421448 , -28.939972 ,
       -26.889282 , -26.629623 , -24.763763 , -24.12938  , -23.443787 ,
       -22.235413 , -21.286896 , -20.552994 , -21.059296 , -22.329514 ,
       -22.56543  , -22.992813 , -22.750381 , -23.367355 , -23.765656 ,
       -23.619095 , -23.77452  , -25.652878 , -28.085388 , -28.053345 ,
       -24.4012   , -23.27214  , -22.236664 , -22.313324 , -22.345596 ,
       -22.788803 , -22.694275 , -22.397995 , -20.139328 , -19.77629  ,
       -18.892273 , -19.037079 , -19.142685 , -19.934753 , -19.736954 ,
       -20.600937 , -21.314468 , -21.114014 , -21.541702 , -21.557663 ,
       -21.075119 , -21.647797 , -22.544678 , -22.597672 , -23.998398 ,
       -25.892075 , -27.64206  , -28.01155  , -28.710999 , -30.233063 ,
       -30.732376 , -30.65538  , -30.358414 , -30.567978 , -28.30066  ,
       -24.61174  , -23.48262  , -23.120346 , -22.473541 , -22.937866 ,
       -22.869202 , -23.101883 , -22.697525 , -22.47847  , -22.861786 ,
       -24.58139  , -26.317322 , -26.460815 , -24.416367 , -22.85318  ,
       -24.899445 , -25.288467 , -27.482422 , -31.53064  , -32.615097 ,
       -31.33786  , -31.542831 , -32.125366 , -30.1053   , -27.458801 ,
       -27.96733  , -28.320557 , -29.414047 , -29.701645 , -30.007126 ,
       -30.251907 , -31.723068 , -31.082932 , -33.120483 , -34.22223  ,
       -34.603516 , -34.738205 , -33.91574  , -33.86606  , -34.095886 ,
       -32.517807 , -32.65146  , -30.152786 , -28.534409 , -27.475998 ,
       -26.156952 , -25.499695 , -27.151672 , -24.961609 , -24.06836  ,
       -24.23845  , -24.484772 , -24.841751 , -24.781387 , -26.522827 ,
       -27.95723  , -28.119919 , -28.081818 , -29.066391 , -27.479263 ,
       -26.937897 , -27.716187 , -28.326889 , -26.515274 , -26.329483 ,
       -25.697235 , -25.886505 , -25.807343 , -25.990204 , -25.288193 ,
       -25.085754 , -24.947067 , -24.516388 , -24.075897 , -24.311798 ,
       -24.652664 , -24.867401 , -25.174896 , -25.498001 , -25.814758 ,
       -24.698608 , -24.08107  , -25.033005 , -24.264801 , -24.205963 ,
       -23.332916 , -23.031738 , -22.224075 , -21.425903 , -20.529556 ,
       -20.591873 , -20.736252 , -20.631866 , -22.365433 , -24.274597 ,
       -24.68509  , -23.109085 , -22.182663 , -22.154587 , -22.593597 ,
       -22.449814 , -22.943527 , -23.566284 , -22.110062 , -20.648743 ,
       -20.14357  , -19.773956 , -19.791626 , -19.817581 , -19.584122 ,
       -19.382904 , -19.696075 , -19.038757 , -20.176804 , -21.547012 ,
       -23.678772 , -25.396011 , -27.070496 , -28.253357 , -27.779785 ,
       -25.577118 , -25.259216 , -26.042984 , -28.683655 , -30.060562 ,
       -30.522995 , -31.110916 , -30.452148 , -28.249252 , -28.871002 ,
       -30.133163 , -30.17183  , -29.098495 , -28.961777 , -26.251526 ,
       -21.490768 , -16.297882 , -12.163116 ,  -9.480072 ,  -7.9664   ,
        -7.4937134,  -6.978485 ,  -7.0210876,  -7.1669006,  -8.823486 ,
       -16.56137  , -20.950134 , -22.349564 , -23.6819   , -23.662216 ,
       -25.077988 , -24.94011  , -22.697327 , -23.575699 , -25.591263 ,
       -25.702133 , -25.645813 , -25.136978 , -23.754333 , -21.871902 ,
       -19.539062 , -18.932098 , -18.59349  , -18.323685 , -18.290253 ,
       -17.921967 , -18.129883 , -17.944199 , -17.282715 , -17.48265  ,
       -17.883896 , -18.607956 , -19.586166 , -20.137115 , -20.627487 ,
       -18.382889 , -16.06015  , -15.256409 , -15.630157 , -14.454559 ,
       -14.310272 , -14.125763 , -15.2005005, -16.877472 , -14.247833 ,
       -11.060699 ,  -9.455933 ,  -8.198761 ,  -7.917389 ,  -8.124695 ,
        -8.517944 ,  -7.0194397], dtype=float32)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#compare to old method which used python=2.7, EPIC formatted NetCDF data and a Great Circle calculator for nearest point</span>

<span class="n">ods</span> <span class="o">=</span> <span class="n">xa</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">netcdf_dir</span><span class="p">[</span><span class="s1">&#39;datapath&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;NARR_C2_2022.cf.nc&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="p">(</span><span class="n">nearest_point</span><span class="o">.</span><span class="n">air</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ods</span><span class="o">.</span><span class="n">AT_21</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="p">((</span><span class="n">nearest_point</span><span class="o">.</span><span class="n">air</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span><span class="o">-</span><span class="n">ods</span><span class="o">.</span><span class="n">AT_21</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="k">assert</span> <span class="p">((</span><span class="n">nearest_point</span><span class="o">.</span><span class="n">air</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="n">ods</span><span class="o">.</span><span class="n">AT_21</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> <span class="s1">&#39;Methods not equivalent&#39;</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/FindNearestGriddedData_8_0.png" src="../../../_images/FindNearestGriddedData_8_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># often a triangle filter was applied to the 3hr data... you can do the same with the following numpy call</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ods</span><span class="o">.</span><span class="n">AT_21</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ods</span><span class="o">.</span><span class="n">time</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">ods</span><span class="o">.</span><span class="n">AT_21</span><span class="p">[:,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span><span class="s1">&#39;same&#39;</span><span class="p">))</span> <span class="c1">#triangle filter</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_date</span> <span class="o">=</span> <span class="s1">&#39;2022-01-01&#39;</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="s1">&#39;2022-02-26&#39;</span>
<span class="n">lat</span> <span class="o">=</span> <span class="mf">56.867</span>
<span class="n">lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">164.07</span>
<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;M2&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## from erddap (SST and ice concentration)</span>

<span class="c1"># Could also use this to retrieve bathymetry from erddap hosted files</span>

<span class="k">def</span> <span class="nf">NearestFromErddap</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">variablename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">latitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">longitude</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">startdate</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">enddate</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Given an erddap url and a datasetID, provide the latitude and longitude to get the nearest datavalue within a time window.  </span>
<span class="sd">    You will also need to specify the name of the parameter you are interested in, some examples are below.</span>
<span class="sd">    </span>
<span class="sd">    date format : yyyy-mm-dd</span>
<span class="sd">    latitude : -90 to 90</span>
<span class="sd">    longitude: try -180:180 or 0:360</span>
<span class="sd">    </span>
<span class="sd">    NOAA - HROISST: https://coastwatch.pfeg.noaa.gov :: ncdcOisst21Agg_LonPM180 or ncdcOisst21Agg</span>
<span class="sd">            sst: err: ice (also all as a 4d function :&#39;( )</span>
<span class="sd">    JPL - MUR: https://coastwatch.pfeg.noaa.gov :: jplMURSST41 or jplMURSST41_Lon0360</span>
<span class="sd">            analysed_sst; sea_ice_fraction; analysis_error</span>
<span class="sd">    UKMET - OSTIA: https://upwell.pfeg.noaa.gov :: nasa_jpl_2fa2_cbe7_cd13.html</span>
<span class="sd">    </span>
<span class="sd">    OSISAF - EUMET: polarwatch.noaa.gov :: eumetsat_osisaf_ice_conc_nh_ps</span>
<span class="sd">    (this outputs and x/y dataset that needs to be merged on to the NH PolarStereographic Grid)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">dataset</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ncdcOisst21Agg_LonPM180&#39;</span><span class="p">,</span><span class="s1">&#39;ncdcOisst21Agg&#39;</span><span class="p">]:</span>
            <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">server</span><span class="si">}</span><span class="s2">/erddap/griddap/</span><span class="si">{</span><span class="n">dataset</span><span class="si">}</span><span class="s2">.csvp?</span><span class="si">{</span><span class="n">variablename</span><span class="si">}</span><span class="s2">[(</span><span class="si">{</span><span class="n">startdate</span><span class="si">}</span><span class="s2">):1:(</span><span class="si">{</span><span class="n">enddate</span><span class="si">}</span><span class="s2">)][(0.0):1:(0.0)][(</span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s2">):1:(</span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s2">)][(</span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s2">):1:(</span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s2">)]&quot;</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;time (UTC)&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">url</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">server</span><span class="si">}</span><span class="s2">/erddap/griddap/</span><span class="si">{</span><span class="n">dataset</span><span class="si">}</span><span class="s2">.csvp?</span><span class="si">{</span><span class="n">variablename</span><span class="si">}</span><span class="s2">[(</span><span class="si">{</span><span class="n">startdate</span><span class="si">}</span><span class="s2">):1:(</span><span class="si">{</span><span class="n">enddate</span><span class="si">}</span><span class="s2">)][(</span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s2">):1:(</span><span class="si">{</span><span class="n">latitude</span><span class="si">}</span><span class="s2">)][(</span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s2">):1:(</span><span class="si">{</span><span class="n">longitude</span><span class="si">}</span><span class="s2">)]&quot;</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;time (UTC)&#39;</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">url</span>    
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jpl_sst</span> <span class="o">=</span> <span class="n">NearestFromErddap</span><span class="p">(</span><span class="s1">&#39;https://coastwatch.pfeg.noaa.gov&#39;</span><span class="p">,</span><span class="s1">&#39;jplMURSST41&#39;</span><span class="p">,</span><span class="s1">&#39;analysed_sst&#39;</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ukmet_sst</span> <span class="o">=</span> <span class="n">NearestFromErddap</span><span class="p">(</span><span class="s1">&#39;https://upwell.pfeg.noaa.gov&#39;</span><span class="p">,</span><span class="s1">&#39;nasa_jpl_2fa2_cbe7_cd13&#39;</span><span class="p">,</span><span class="s1">&#39;analysed_sst&#39;</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noaaoi_sst</span> <span class="o">=</span> <span class="n">NearestFromErddap</span><span class="p">(</span><span class="s1">&#39;https://coastwatch.pfeg.noaa.gov&#39;</span><span class="p">,</span><span class="s1">&#39;ncdcOisst21Agg_LonPM180&#39;</span><span class="p">,</span><span class="s1">&#39;sst&#39;</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">jpl_sst</span><span class="p">[</span><span class="s1">&#39;analysed_sst (degree_C)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MUR&#39;</span><span class="p">)</span>
<span class="n">ukmet_sst</span><span class="p">[</span><span class="s1">&#39;analysed_sst (degree_C)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;UKMet&#39;</span><span class="p">)</span>
<span class="n">noaaoi_sst</span><span class="p">[</span><span class="s1">&#39;sst (degree_C)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;NOAA&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can use the same code above to retrieve “ice concentration” information at the same location as well… some even from the same datasource</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jpl_ice</span> <span class="o">=</span> <span class="n">NearestFromErddap</span><span class="p">(</span><span class="s1">&#39;https://coastwatch.pfeg.noaa.gov&#39;</span><span class="p">,</span><span class="s1">&#39;jplMURSST41&#39;</span><span class="p">,</span><span class="s1">&#39;sea_ice_fraction&#39;</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">-01-01&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ukmet_ice</span> <span class="o">=</span> <span class="n">NearestFromErddap</span><span class="p">(</span><span class="s1">&#39;https://upwell.pfeg.noaa.gov&#39;</span><span class="p">,</span><span class="s1">&#39;nasa_jpl_2fa2_cbe7_cd13&#39;</span><span class="p">,</span><span class="s1">&#39;sea_ice_fraction&#39;</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">-01-01&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noaaoi_ice</span> <span class="o">=</span> <span class="n">NearestFromErddap</span><span class="p">(</span><span class="s1">&#39;https://coastwatch.pfeg.noaa.gov&#39;</span><span class="p">,</span><span class="s1">&#39;ncdcOisst21Agg_LonPM180&#39;</span><span class="p">,</span><span class="s1">&#39;ice&#39;</span><span class="p">,</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">-01-01&#39;</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">jpl_ice</span><span class="p">[</span><span class="s1">&#39;sea_ice_fraction (1)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;MUR&#39;</span><span class="p">)</span>
<span class="n">ukmet_ice</span><span class="p">[</span><span class="s1">&#39;sea_ice_fraction (1)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;UKMet&#39;</span><span class="p">)</span>
<span class="n">noaaoi_ice</span><span class="p">[</span><span class="s1">&#39;ice (1)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;NOAA&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">.01</span><span class="p">,</span><span class="mf">1.01</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Todo:</strong></p>
<ul class="simple">
<li><p>Show that the gridded datapoint is near the initial datapoint and include some simple bathymetry or coastlines</p></li>
<li><p>Ouput to csv is straight forward (netcdf -&gt; pandas -&gt; csv)… any other specific formats need descriptions</p></li>
<li><p>Tether into Database for MooringID’s or CTD Locations?</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "conda-env-py38-py"
        },
        kernelOptions: {
            kernelName: "conda-env-py38-py",
            path: "./content/code_gallery/data_analysis_and_visualization_notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'conda-env-py38-py'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../data_analysis_and_visualization.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Data Analysis And Visualization</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Map_contours_examples.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Two ways to use bathymetric datasets to generate bathymetry contours in a plot</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By EcoFOCI<br/>
        
          <div class="extra_footer">
            <a href=https://www.ecofoci.noaa.gov> ecofoci.noaa.gov </a> &nbsp <a href="mailto:pmel.ecofoci@noaa.gov">Contact Us</a> <br> Ecosystems-Fisheries/Oceanography Coordinated Investigations <br> 7200 Sandpoint Way NE <br>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>